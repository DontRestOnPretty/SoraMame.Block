<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="lib/img/favicon.ico">

    <title>SoraMame</title>

    <!-- Bootstrap core CSS -->
    <link href="lib/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="lib/css/flat-ui.min.css" rel="stylesheet">
    <link href="lib/css/navbar-fixed-top.css" rel="stylesheet">
    <link href="lib/css/soramame.block.css" rel="stylesheet">
	
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="lib/js/ie8-responsive-file-warning.js"></script><![endif]<!-- 
    <script src="lib/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

	<!-- Syntax Highlighter -->
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css"/>
  </head>

  <body>

	<div class="container">

		<!-- Start Static navbar -->
		<div class="navbar navbar-inverse navbar-embossed navbar-fixed-top" role="navigation">
			<div class="container-fluid">
			  <div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
				  <span class="sr-only">Toggle navigation</span>
				  <span class="icon-bar"></span>
				  <span class="icon-bar"></span>
				  <span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">SoraMame</a>
			  </div>
			  <div class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#menu1" data-toggle="tab">Block</a></li>
					<li onclick="setSerializeBlock()"><a href="#menu2" data-toggle="tab">Code</a></li>
					<li><a href="javascript:void(0)" onclick="execCodeBlock(); return false;"><i class="glyphicon glyphicon-play"></i> Run</a></li>
					<li><a href="#"><i class="glyphicon glyphicon-stop"></i> Stop</a></li>
				</ul>
			  </div><!--/.nav-collapse -->
			</div><!--/.container-fluid -->
		</div><!-- End Static navbar -->

		<!-- Main component -->
		<div class="row">
		  <!-- tab body -->
		  <div class="tab-content">

				<!-- tab body #1 -->
				<div class="tab-pane fade in active" id="menu1">

				<!-- start code palette -->
				<div class="col-md-2">
				<div class="sidebar-nav affix" role="complementary">
				  <div class="panel-group" id="accordion">
				
					<!-- start panel -->
					<div class="panel panel-default">
					  <div class="panel-heading">
						<h4 class="panel-title">
							<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse11">
								BASIC
							</a>
						</h4>
					  </div>
					  <!-- panel-collapse -->
					  <div id="collapse11" class="panel-collapse collapse in">
						<div class="panel-body">
							<ol class="pallet-code block connect-area">
								<li class="basic-block">input();</li>
								<li class="basic-block">print</li>
								<li class="comment-block">comment</li>
							</ol>
						</div>
					  </div>
					</div><!-- end panel -->
					
					<!-- start panel -->
					<div class="panel panel-default">
					  <div class="panel-heading">
						<h4 class="panel-title">
							<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse12">
								IF
							</a>
						</h4>
					  </div>
					  <!-- panel-collapse -->
					  <div id="collapse12" class="panel-collapse collapse">
						<div class="panel-body">
							<ol class="pallet-code block connect-area">
								<li class="if-block">if ()</li>
								<li class="if-block">else if ()</li>
								<li class="if-block">else</li>
							</ol>
						</div>
					  </div>
					</div><!-- end panel -->
					
					<!-- start panel -->
					<div class="panel panel-default">
					  <div class="panel-heading">
						<h4 class="panel-title">
							<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse13">
								LOOP
							</a>
						</h4>
					  </div>
					  <!-- panel-collapse -->
					  <div id="collapse13" class="panel-collapse collapse">
						<div class="panel-body">
							<ol class="pallet-code block connect-area">
								<li class="loop-block">while</li>
								<li class="loop-block">for</li>
							</ol>
						</div>
					  </div>
					</div><!-- end panel -->
					
					<!-- start panel -->
					<div class="panel panel-default">
					  <div class="panel-heading">
						<h4 class="panel-title">
							<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse14">
								VAR
							</a>
						</h4>
					  </div>
					  <!-- panel-collapse -->
					  <div id="collapse14" class="panel-collapse collapse">
						<div class="panel-body">
							<ol class="pallet-code block connect-area">
								<li class="var-block item-block">item0a</li>
							</ol>
							<ol class="pallet-code block connect-area">
								<li class="var-block item-block">item0b</li>
							</ol>
						</div>
					  </div>
					</div><!-- end panel -->
				  </div><!-- panel-group -->
				</div>
				</div>
				<!-- end code palette -->

				<!-- Main Edit Area -->
				<div class="col-md-8">
				<ol class="block connect-area serialize">
					<li class="var-block">var msg = "Hello:" + name + "\n";</li>
					<li class="var-block">var i=1;</li>
					<li class="loop-block">while (i <= 15) { 
						<ol>
							<li class="if-block">if((i % 3 == 0) && (i % 5 == 0)) { 
								<ol>
									<li class="var-block">msg = msg + i + ": FizzBuzz\n";</li>
								</ol>} 
							</li>
							<li class="if-block">else if (i % 3 == 0){ 
								<ol>
									<li class="var-block">msg = msg + i + ": Fizz\n";</li>
								</ol>}
							</li>
							<li class="if-block">else if (i % 5 == 0){ 
								<ol>
									<li class="var-block">msg = msg + i + ": Buzz\n";</li>
								</ol>}
							</li>
							<li class="if-block">else { 
								<ol>
									<li class="var-block">msg = msg + i + "\n" ;</li>
								</ol>} 
							</li>
							<li class="var-block">i=i+1;</li>
						</ol>}
					</li>
					<li class="basic-block">alert(msg);</li>
				</ol>
				</div>
				<!-- end of Main Edit Area-->

				<!-- trash area-->
				<div class="col-md-2">
					<div class="sidebar-nav affix" role="complementary" 
						data-toggle="tooltip" data-placement="top" title="double-click:clear">
						<a class="trash" href="#" ondblclick="clearTrash()">
						</a>
						<ol id="trash-can" class="trash-code block connect-area">
						</ol>
					</div>
				</div>
				<!-- end of trash area-->
			  </div><!-- end of tab body #1 -->

			  <!-- tab body #2 -->
			  <div class="col-md-2"></div>
			  <div class="tab-pane fade" id="menu2">
					<pre>
					<code class="js"></code>
					</pre>
			  </div>
			  <div class="col-md-"></div>
		  </div> <!-- end of tab body-->
		</div>
		<!-- end row -->
    </div>
	<!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="lib/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="lib/js/ie10-viewport-bug-workaround.js"></script>
	<script type="text/javascript" src="lib/js/soramame.block.js"></script>
	
	<script type="text/javascript" src="lib/js/beautify.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>

	<script type="text/javascript">
		$('ol.pallet-code').sortable({
			group: 'connect-area',
			drop: false,
			onDragStart: function (item, container, _super) {
				// Duplicate items of the no drop area
				if(!container.options.drop) {
					item.clone().insertAfter(item)
				}
				_super(item);
			}
		});

		$('ol.block').sortable({
			group: 'connect-area',
		});

		$('ol.trash-code').sortable({
			group: 'connect-area',
		});

	</script>
	<script type="text/javascript">
		var code ={};

		function clearTrash(){
			if(window.confirm("Clear trash?")) {
				$("#trash-can").empty();
			}
		};
		
		function setSerializeBlock() {
			var data = $('.serialize').text();
			$("pre code").text(js_beautify(data));
			
			$('pre code').each(function(i, block) {
				hljs.highlightBlock(block);
			});
		};
		
		function getCodeBlock() {
			return $("pre code").text();
		};

		function execCodeBlock() {
			setSerializeBlock();
			var codeText = getCodeBlock()
			code.exec = new Function(codeText);
			code.exec();
		};
	</script>
  </body>
</html>
